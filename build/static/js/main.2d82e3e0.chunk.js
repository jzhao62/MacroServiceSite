(this["webpackJsonpserverless-fullstack-app-website"]=this["webpackJsonpserverless-fullstack-app-website"]||[]).push([[0],{1:function(e,t,a){e.exports={container:"Auth_container__38MaD",containerInner:"Auth_containerInner__CqDBZ",containerLoading:"Auth_containerLoading__3SpOz",logo:"Auth_logo__QQbsI",error:"Auth_error__mgYyx",success:"Auth_success__w7pcp",containerRegister:"Auth_containerRegister__1rRg4",containerSignIn:"Auth_containerSignIn__3ji1h",formType:"Auth_formType__qgBvB",formTypeRegister:"Auth_formTypeRegister__2vihV",formTypeSignIn:"Auth_formTypeSignIn__1mpek",formTypeActive:"Auth_formTypeActive__1PvA-",form:"Auth_form__3CaJd",formField:"Auth_formField__bK1gG",formLabel:"Auth_formLabel__1WaRu",formInput:"Auth_formInput__3SJPf",formError:"Auth_formError__ZM6ss",formButton:"Auth_formButton__1s0uG",forgotPassword:"Auth_forgotPassword__3-P9H",githubLink:"Auth_githubLink__3XiqP"}},15:function(e,t,a){e.exports={container:"Home_container__1s89M",containerInner:"Home_containerInner__2o1oM",heroArtwork:"Home_heroArtwork__20dAe",heroTitle:"Home_heroTitle__tMDRC",heroDescription:"Home_heroDescription__3zxD7",containerCta:"Home_containerCta__1qyyG",linkSignIn:"Home_linkSignIn__3QHgg"}},17:function(e,t,a){e.exports={container:"Dashboard_container__3R_9z",containerInner:"Dashboard_containerInner__2p9Zk",navigationContainer:"Dashboard_navigationContainer__2i260",contentContainer:"Dashboard_contentContainer__1A5L2",welcomeMessage:"Dashboard_welcomeMessage__1cAsB",artwork:"Dashboard_artwork__3pje2"}},27:function(e,t,a){e.exports={container:"Loading_container__1NL59",pulse:"Loading_pulse__LlQRi"}},30:function(e,t,a){e.exports=a(42)},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),o=a.n(s),c=a(29),i=a(2),l=a.n(i),u=a(5),m=a(9),p=a(10),f=a(12),h=a(11),d=a(13),g=a(3),v=a(15),b=a.n(v),_=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(b.a.container," animateFadeIn")},r.a.createElement("div",{className:b.a.containerInner},r.a.createElement("div",{className:"".concat(b.a.heroArtwork," animateFlicker")},r.a.createElement("img",{draggable:"false",src:"./fullstack-app-artwork.png",alt:"serverless-fullstack-application"})),r.a.createElement("div",{className:"".concat(b.a.heroTitle)},r.a.createElement("img",{draggable:"false",src:"./fullstack-app-title.png",alt:"serverless-fullstack-application"})),r.a.createElement("div",{className:"".concat(b.a.heroDescription)},"A serverless full-stack application built with AWS Lambda, AWS HTTP API, Express.js, React & AWS DynamoDB."),r.a.createElement("div",{className:"".concat(b.a.containerCta)},r.a.createElement(d.b,{to:"/register"},r.a.createElement("button",{className:"buttonPrimaryLarge"},"Register")),r.a.createElement(d.b,{to:"/login",className:"".concat(b.a.linkSignIn)},"sign-in"))))}}]),a}(n.Component),E=Object(g.f)(_),k=a(14),w=a(27),y=a.n(w),j=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(this.props.className)},r.a.createElement("div",{className:"".concat(y.a.container)},r.a.createElement("img",{draggable:!1,alt:"Loading",src:"https://s3.amazonaws.com/dashboard.serverless.com/images/icon-serverless-framework.png"}),r.a.createElement("p",null,"loading...")))}}]),a}(n.Component),N=a(1),O=a.n(N),I=(a(28),a(19)),x=a.n(I),S=function(){var e=x.a.get("serverless");return e?JSON.parse(e):null},A={domains:{}};A.domains.api="https://44513jpdra.execute-api.us-east-1.amazonaws.com";var C=A,T=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("/users/register","POST",{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),F=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("/users/login","POST",{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D("/user","POST",null,{Authorization:"Bearer ".concat(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r,s,o,c,i,u=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=u.length>0&&void 0!==u[0]?u[0]:"",n=u.length>1&&void 0!==u[1]?u[1]:"GET",r=u.length>2&&void 0!==u[2]?u[2]:null,s=u.length>3&&void 0!==u[3]?u[3]:{},null===C||void 0===C||null===(t=C.domains)||void 0===t?void 0:t.api){e.next=6;break}throw new Error('Error: Missing API Domain \u2013 Please add the API domain from your serverless Express.js back-end to this front-end application.  You can do this in the "site" folder, in the "./config.js" file.  Instructions are listed there and in the documentation.');case 6:return a.startsWith("/")||(a="/".concat(a)),o="".concat(C.domains.api).concat(a),s=Object.assign({"Content-Type":"application/json"},s),e.next=11,fetch(o,{method:n.toUpperCase(),mode:"cors",cache:"no-cache",headers:s,body:r?JSON.stringify(r):null});case 11:if(!((c=e.sent).status<200||c.status>=300)){e.next=17;break}return e.next=15,c.json();case 15:throw i=e.sent,new Error(i.error);case 17:return e.next=19,c.json();case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(m.a)(this,a),n=t.call(this,e);var r=window.location.pathname.replace("/","");return n.state={},n.state.state=r,n.state.loading=!0,n.state.error=null,n.state.formEmail="",n.state.formPassword="",n.handleFormInput=n.handleFormInput.bind(Object(k.a)(n)),n.handleFormSubmit=n.handleFormSubmit.bind(Object(k.a)(n)),n.handleFormTypeChange=n.handleFormTypeChange.bind(Object(k.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.setState({loading:!1});var e=document.location.href;window.history.pushState({},"",e.split("?")[0])}},{key:"handleFormTypeChange",value:function(e){var t=this;this.setState({state:e},(function(){t.props.history.push("/".concat(e))}))}},{key:"handleFormInput",value:function(e,t){t=t.trim();var a={};a[e]=t,this.setState(Object.assign(this.state,a))}},{key:"handleFormSubmit",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),this.setState({loading:!0}),this.state.formEmail){e.next=4;break}return e.abrupt("return",this.setState({loading:!1,formError:"email is required"}));case 4:if(this.state.formPassword){e.next=6;break}return e.abrupt("return",this.setState({loading:!1,formError:"password is required"}));case 6:if(e.prev=6,"register"!==this.state.state){e.next=13;break}return e.next=10,T(this.state.formEmail,this.state.formPassword);case 10:a=e.sent,e.next=16;break;case 13:return e.next=15,F(this.state.formEmail,this.state.formPassword);case 15:a=e.sent;case 16:e.next=23;break;case 18:return e.prev=18,e.t0=e.catch(6),console.log(e.t0),e.t0.message?this.setState({formError:e.t0.message,loading:!1}):this.setState({formError:"Sorry, something unknown went wrong.  Please try again.",loading:!1}),e.abrupt("return");case 23:return e.next=25,P(a.token);case 25:n=(n=e.sent).user,r=n.id,s=n.email,o=a.token,x.a.set("serverless",{userId:r,userEmail:s,userToken:o}),window.location.replace("/");case 29:case"end":return e.stop()}var r,s,o}),e,this,[[6,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"".concat(O.a.container," animateFadeIn")},r.a.createElement("div",{className:O.a.containerInner},r.a.createElement(d.b,{to:"/",className:"".concat(O.a.logo)},r.a.createElement("img",{draggable:"false",src:"./fullstack-app-title.png",alt:"serverless-fullstack-application"})),this.state.loading&&r.a.createElement("div",null,r.a.createElement(j,{className:O.a.containerLoading})),!this.state.loading&&r.a.createElement("div",{className:O.a.formType},r.a.createElement("div",{className:"".concat(O.a.formTypeRegister," \n                ").concat("register"===this.state.state?O.a.formTypeActive:""),onClick:function(t){e.handleFormTypeChange("register")}},"Register"),r.a.createElement("div",{className:"".concat(O.a.formTypeSignIn," \n                ").concat("login"===this.state.state?O.a.formTypeActive:""),onClick:function(t){e.handleFormTypeChange("login")}},"Sign-In")),"register"===this.state.state&&!this.state.loading&&r.a.createElement("div",{className:O.a.containerRegister},r.a.createElement("form",{className:O.a.form,onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:O.a.formField},r.a.createElement("label",{className:O.a.formLabel},"email"),r.a.createElement("input",{type:"text",placeholder:"yours@example.com",className:O.a.formInput,value:this.state.formEmail,onChange:function(t){e.handleFormInput("formEmail",t.target.value)}})),r.a.createElement("div",{className:O.a.formField},r.a.createElement("label",{className:O.a.formLabel},"password"),r.a.createElement("input",{type:"password",placeholder:"your password",className:O.a.formInput,value:this.state.formPassword,onChange:function(t){e.handleFormInput("formPassword",t.target.value)}})),this.state.formError&&r.a.createElement("div",{className:O.a.formError},this.state.formError),r.a.createElement("input",{className:"buttonPrimaryLarge ".concat(O.a.formButton),type:"submit",value:"Register"}))),"login"===this.state.state&&!this.state.loading&&r.a.createElement("div",{className:O.a.containerSignIn},r.a.createElement("form",{className:O.a.form,onSubmit:this.handleFormSubmit},r.a.createElement("div",{className:O.a.formField},r.a.createElement("label",{className:O.a.formLabel},"email"),r.a.createElement("input",{type:"text",placeholder:"yours@example.com",className:O.a.formInput,value:this.state.formEmail,onChange:function(t){e.handleFormInput("formEmail",t.target.value)}})),r.a.createElement("div",{className:O.a.formField},r.a.createElement("label",{className:O.a.formLabel},"password"),r.a.createElement("input",{type:"password",placeholder:"your password",className:O.a.formInput,value:this.state.formPassword,onChange:function(t){e.handleFormInput("formPassword",t.target.value)}})),this.state.formError&&r.a.createElement("div",{className:O.a.formError},this.state.formError),r.a.createElement("input",{className:"buttonPrimaryLarge ".concat(O.a.formButton),type:"submit",value:"Sign In"})))))}}]),a}(n.Component),M=Object(g.f)(L),R=a(17),B=a.n(R),H=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n.logout=n.logout.bind(Object(k.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S(),this.setState({session:t});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logout",value:function(){x.a.remove("serverless"),this.props.history.push("/")}},{key:"render",value:function(){return r.a.createElement("div",{className:"".concat(B.a.container," animateFadeIn")},r.a.createElement("div",{className:B.a.containerInner},r.a.createElement("div",{className:B.a.navigationContainer},r.a.createElement("div",{className:"link"},this.state.session?this.state.session.userEmail:""),r.a.createElement("div",{className:"link",onClick:this.logout},"logout")),r.a.createElement("div",{className:"".concat(B.a.contentContainer)},r.a.createElement("div",{className:"".concat(B.a.artwork," animateFlicker")},r.a.createElement("img",{draggable:"false",src:"./fullstack-app-artwork.png",alt:"serverless-fullstack-application"})),r.a.createElement("div",{className:"".concat(B.a.welcomeMessage)},"Welcome to your serverless fullstack dashboard..."))))}}]),a}(n.Component),q=Object(g.f)(H),z=function(e){Object(f.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement(g.c,null,r.a.createElement(g.a,{path:"/register"},r.a.createElement(M,null)),r.a.createElement(g.a,{path:"/login"},r.a.createElement(M,null)),r.a.createElement(J,{exact:!0,path:"/",component:q})))}}]),a}(n.Component),J=function(e){e.component;var t=Object(c.a)(e,["component"]),a=S()?q:E;return r.a.createElement(g.a,Object.assign({},t,{component:a}))};a(41);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.2d82e3e0.chunk.js.map