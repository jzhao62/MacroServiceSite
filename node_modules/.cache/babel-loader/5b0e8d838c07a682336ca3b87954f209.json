{"ast":null,"code":"import _regeneratorRuntime from\"/home/jingyi/Server/my-fullstack-app/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jingyi/Server/my-fullstack-app/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/jingyi/Server/my-fullstack-app/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jingyi/Server/my-fullstack-app/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/jingyi/Server/my-fullstack-app/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jingyi/Server/my-fullstack-app/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/jingyi/Server/my-fullstack-app/site/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link,withRouter}from'react-router-dom';import Loading from'../../fragments/Loading';import styles from'./Auth.module.css';import{userRegister,userLogin,userGet,saveSession}from'../../utils';var Auth=/*#__PURE__*/function(_Component){_inherits(Auth,_Component);var _super=_createSuper(Auth);function Auth(props){var _this;_classCallCheck(this,Auth);_this=_super.call(this,props);var pathName=window.location.pathname.replace('/','');_this.state={};_this.state.state=pathName;_this.state.loading=true;_this.state.error=null;_this.state.formEmail='';_this.state.formPassword='';// Bindings\n_this.handleFormInput=_this.handleFormInput.bind(_assertThisInitialized(_this));_this.handleFormSubmit=_this.handleFormSubmit.bind(_assertThisInitialized(_this));_this.handleFormTypeChange=_this.handleFormTypeChange.bind(_assertThisInitialized(_this));return _this;}/**\n   * Component did mount\n   */_createClass(Auth,[{key:\"componentDidMount\",value:function componentDidMount(){this.setState({loading:false});// Clear query params\nvar url=document.location.href;window.history.pushState({},'',url.split('?')[0]);}/**\n   * Handles a form change\n   */},{key:\"handleFormTypeChange\",value:function handleFormTypeChange(type){var _this2=this;this.setState({state:type},function(){_this2.props.history.push(\"/\".concat(type));});}/**\n   * Handle text changes within form fields\n   */},{key:\"handleFormInput\",value:function handleFormInput(field,value){value=value.trim();var nextState={};nextState[field]=value;this.setState(Object.assign(this.state,nextState));}/**\n   * Handles form submission\n   * @param {object} evt \n   */},{key:\"handleFormSubmit\",value:function(){var _handleFormSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(evt){var token,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:evt.preventDefault();this.setState({loading:true});// Validate email\nif(this.state.formEmail){_context.next=4;break;}return _context.abrupt(\"return\",this.setState({loading:false,formError:'email is required'}));case 4:if(this.state.formPassword){_context.next=6;break;}return _context.abrupt(\"return\",this.setState({loading:false,formError:'password is required'}));case 6:_context.prev=6;if(!(this.state.state==='register')){_context.next=13;break;}_context.next=10;return userRegister(this.state.formEmail,this.state.formPassword);case 10:token=_context.sent;_context.next=16;break;case 13:_context.next=15;return userLogin(this.state.formEmail,this.state.formPassword);case 15:token=_context.sent;case 16:_context.next=23;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](6);console.log(_context.t0);if(_context.t0.message){this.setState({formError:_context.t0.message,loading:false});}else{this.setState({formError:'Sorry, something unknown went wrong.  Please try again.',loading:false});}return _context.abrupt(\"return\");case 23:_context.next=25;return userGet(token.token);case 25:user=_context.sent;user=user.user;saveSession(user.id,user.email,token.token);window.location.replace('/');case 29:case\"end\":return _context.stop();}}},_callee,this,[[6,18]]);}));function handleFormSubmit(_x){return _handleFormSubmit.apply(this,arguments);}return handleFormSubmit;}()},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(styles.container,\" animateFadeIn\")},/*#__PURE__*/React.createElement(\"div\",{className:styles.containerInner},/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"\".concat(styles.logo)},/*#__PURE__*/React.createElement(\"img\",{draggable:\"false\",src:'./fullstack-app-title.png',alt:\"serverless-fullstack-application\"})),this.state.loading&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Loading,{className:styles.containerLoading})),!this.state.loading&&/*#__PURE__*/React.createElement(\"div\",{className:styles.formType},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(styles.formTypeRegister,\" \\n                \").concat(this.state.state==='register'?styles.formTypeActive:''),onClick:function onClick(e){_this3.handleFormTypeChange('register');}},\"Register\"),/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(styles.formTypeSignIn,\" \\n                \").concat(this.state.state==='login'?styles.formTypeActive:''),onClick:function onClick(e){_this3.handleFormTypeChange('login');}},\"Sign-In\")),this.state.state==='register'&&!this.state.loading&&/*#__PURE__*/React.createElement(\"div\",{className:styles.containerRegister},/*#__PURE__*/React.createElement(\"form\",{className:styles.form,onSubmit:this.handleFormSubmit},/*#__PURE__*/React.createElement(\"div\",{className:styles.formField},/*#__PURE__*/React.createElement(\"label\",{className:styles.formLabel},\"email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"yours@example.com\",className:styles.formInput,value:this.state.formEmail,onChange:function onChange(e){_this3.handleFormInput('formEmail',e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:styles.formField},/*#__PURE__*/React.createElement(\"label\",{className:styles.formLabel},\"password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"your password\",className:styles.formInput,value:this.state.formPassword,onChange:function onChange(e){_this3.handleFormInput('formPassword',e.target.value);}})),this.state.formError&&/*#__PURE__*/React.createElement(\"div\",{className:styles.formError},this.state.formError),/*#__PURE__*/React.createElement(\"input\",{className:\"buttonPrimaryLarge \".concat(styles.formButton),type:\"submit\",value:\"Register\"}))),this.state.state==='login'&&!this.state.loading&&/*#__PURE__*/React.createElement(\"div\",{className:styles.containerSignIn},/*#__PURE__*/React.createElement(\"form\",{className:styles.form,onSubmit:this.handleFormSubmit},/*#__PURE__*/React.createElement(\"div\",{className:styles.formField},/*#__PURE__*/React.createElement(\"label\",{className:styles.formLabel},\"email\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"yours@example.com\",className:styles.formInput,value:this.state.formEmail,onChange:function onChange(e){_this3.handleFormInput('formEmail',e.target.value);}})),/*#__PURE__*/React.createElement(\"div\",{className:styles.formField},/*#__PURE__*/React.createElement(\"label\",{className:styles.formLabel},\"password\"),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"your password\",className:styles.formInput,value:this.state.formPassword,onChange:function onChange(e){_this3.handleFormInput('formPassword',e.target.value);}})),this.state.formError&&/*#__PURE__*/React.createElement(\"div\",{className:styles.formError},this.state.formError),/*#__PURE__*/React.createElement(\"input\",{className:\"buttonPrimaryLarge \".concat(styles.formButton),type:\"submit\",value:\"Sign In\"})))));}}]);return Auth;}(Component);export default withRouter(Auth);","map":{"version":3,"sources":["/home/jingyi/Server/my-fullstack-app/site/src/pages/Auth/Auth.js"],"names":["React","Component","Link","withRouter","Loading","styles","userRegister","userLogin","userGet","saveSession","Auth","props","pathName","window","location","pathname","replace","state","loading","error","formEmail","formPassword","handleFormInput","bind","handleFormSubmit","handleFormTypeChange","setState","url","document","href","history","pushState","split","type","push","field","value","trim","nextState","Object","assign","evt","preventDefault","formError","token","console","log","message","user","id","email","container","containerInner","logo","containerLoading","formType","formTypeRegister","formTypeActive","e","formTypeSignIn","containerRegister","form","formField","formLabel","formInput","target","formButton","containerSignIn"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {\n  Link,\n  withRouter,\n} from 'react-router-dom'\nimport Loading from '../../fragments/Loading'\nimport styles from './Auth.module.css'\nimport {\n  userRegister,\n  userLogin,\n  userGet,\n  saveSession,\n} from '../../utils'\n\nclass Auth extends Component {\n\n  constructor(props) {\n    super(props)\n\n    const pathName = window.location.pathname.replace('/', '')\n\n    this.state = {}\n    this.state.state = pathName\n    this.state.loading = true\n    this.state.error = null\n    this.state.formEmail = ''\n    this.state.formPassword = ''\n\n    // Bindings\n    this.handleFormInput = this.handleFormInput.bind(this)\n    this.handleFormSubmit = this.handleFormSubmit.bind(this)\n    this.handleFormTypeChange = this.handleFormTypeChange.bind(this)\n  }\n\n  /**\n   * Component did mount\n   */\n  componentDidMount() {\n    this.setState({\n      loading: false\n    })\n\n    // Clear query params\n    const url = document.location.href\n    window.history.pushState({}, '', url.split('?')[0])\n  }\n\n  /**\n   * Handles a form change\n   */\n  handleFormTypeChange(type) {\n    this.setState({ state: type },\n      () => {\n        this.props.history.push(`/${type}`)\n      })\n  }\n\n  /**\n   * Handle text changes within form fields\n   */\n  handleFormInput(field, value) {\n    value = value.trim()\n\n    const nextState = {}\n    nextState[field] = value\n\n    this.setState(Object.assign(this.state, nextState))\n  }\n\n  /**\n   * Handles form submission\n   * @param {object} evt \n   */\n  async handleFormSubmit(evt) {\n    evt.preventDefault()\n\n    this.setState({ loading: true })\n\n    // Validate email\n    if (!this.state.formEmail) {\n      return this.setState({\n        loading: false,\n        formError: 'email is required'\n      })\n    }\n\n    // Validate password\n    if (!this.state.formPassword) {\n      return this.setState({\n        loading: false,\n        formError: 'password is required'\n      })\n    }\n\n    let token\n    try {\n      if (this.state.state === 'register') {\n        token = await userRegister(this.state.formEmail, this.state.formPassword)\n      } else {\n        token = await userLogin(this.state.formEmail, this.state.formPassword)\n      }\n    } catch (error) {\n      console.log(error)\n      if (error.message) {\n        this.setState({\n          formError: error.message,\n          loading: false\n        })\n      } else {\n        this.setState({\n          formError: 'Sorry, something unknown went wrong.  Please try again.',\n          loading: false\n        })\n      }\n      return\n    }\n\n    // Fetch user record and set session in cookie\n    let user = await userGet(token.token)\n    user = user.user\n    saveSession(user.id, user.email, token.token)\n\n    window.location.replace('/')\n  }\n\n  render() {\n\n    return (\n      <div className={`${styles.container} animateFadeIn`}>\n        <div className={styles.containerInner}>\n\n          { /* Logo */}\n\n          <Link to='/' className={`${styles.logo}`}>\n            <img\n              draggable='false'\n              src={'./fullstack-app-title.png'}\n              alt='serverless-fullstack-application'\n            />\n          </Link>\n\n          { /* Loading */}\n\n          {this.state.loading && (\n            <div>\n              {< Loading className={styles.containerLoading} />}\n            </div>\n          )}\n\n          { /* Registration Form */}\n\n          {!this.state.loading && (\n            <div className={styles.formType}>\n              <div\n                className={\n                  `${styles.formTypeRegister} \n                ${this.state.state === 'register' ? styles.formTypeActive : ''}`}\n                onClick={(e) => { this.handleFormTypeChange('register') }}>\n                Register\n              </div>\n              <div\n                className={\n                  `${styles.formTypeSignIn} \n                ${this.state.state === 'login' ? styles.formTypeActive : ''}`}\n                onClick={(e) => { this.handleFormTypeChange('login') }}>\n                Sign-In\n              </div>\n            </div>\n          )}\n\n          {this.state.state === 'register' && !this.state.loading && (\n            <div className={styles.containerRegister}>\n\n              <form className={styles.form} onSubmit={this.handleFormSubmit}>\n                <div className={styles.formField}>\n                  <label className={styles.formLabel}>email</label>\n                  <input\n                    type='text'\n                    placeholder='yours@example.com'\n                    className={styles.formInput}\n                    value={this.state.formEmail}\n                    onChange={(e) => { this.handleFormInput('formEmail', e.target.value) }}\n                  />\n                </div>\n                <div className={styles.formField}>\n                  <label className={styles.formLabel}>password</label>\n                  <input\n                    type='password'\n                    placeholder='your password'\n                    className={styles.formInput}\n                    value={this.state.formPassword}\n                    onChange={(e) => { this.handleFormInput('formPassword', e.target.value) }}\n                  />\n                </div>\n\n                {this.state.formError && (\n                  <div className={styles.formError}>{this.state.formError}</div>\n                )}\n\n                <input\n                  className={`buttonPrimaryLarge ${styles.formButton}`}\n                  type='submit'\n                  value='Register'\n                />\n\n              </form>\n            </div>\n          )}\n\n          {this.state.state === 'login' && !this.state.loading && (\n            <div className={styles.containerSignIn}>\n\n              <form className={styles.form} onSubmit={this.handleFormSubmit}>\n                <div className={styles.formField}>\n                  <label className={styles.formLabel}>email</label>\n                  <input\n                    type='text'\n                    placeholder='yours@example.com'\n                    className={styles.formInput}\n                    value={this.state.formEmail}\n                    onChange={(e) => { this.handleFormInput('formEmail', e.target.value) }}\n                  />\n                </div>\n                <div className={styles.formField}>\n                  <label className={styles.formLabel}>password</label>\n                  <input\n                    type='password'\n                    placeholder='your password'\n                    className={styles.formInput}\n                    value={this.state.formPassword}\n                    onChange={(e) => { this.handleFormInput('formPassword', e.target.value) }}\n                  />\n                </div>\n\n                {this.state.formError && (\n                  <div className={styles.formError}>{this.state.formError}</div>\n                )}\n\n                <input className={`buttonPrimaryLarge ${styles.formButton}`} type='submit' value='Sign In' />\n              </form>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withRouter(Auth)"]},"metadata":{},"sourceType":"module"}